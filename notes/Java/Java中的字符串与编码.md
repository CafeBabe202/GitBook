# ğŸ˜€ javaä¸­çš„å­—ç¬¦ä¸ç¼–ç 

æƒ³è¦å¼„æ¸…æ¥šjavaä¸­çš„å­—ç¬¦ä¸å­—ç¬¦ä¸²ç¼–ç ï¼Œé¦–å…ˆè¦å¼„æ¸…æ¥šUnicodeç¼–ç ã€UTF-8ç¼–ç å’ŒUTF-16ç¼–ç 

### Unicode

åœ¨Unicodeå‡ºç°ä¹‹å‰ï¼Œå·²ç»å­˜åœ¨å¾ˆå¤šç§ä¸åŒçš„å­—ç¬¦ç¼–ç æ ‡å‡†ï¼šç¾å›½çš„ASCIIç¼–ç ï¼Œè¥¿æ¬§è¯­è¨€ä¸­çš„ISO 8859-1ç¼–ç ï¼Œä¿„ç½—æ–¯çš„KOI-8ç¼–ç ï¼Œä¸­å›½çš„GB 180550å’ŒBIG-5ç¼–ç ç­‰ç­‰ã€‚è¿™æ ·å°±å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±åŒæ ·çš„æ•°å€¼åœ¨ä¸åŒç¼–ç ä¸­è¡¨ç¤ºçš„å­—ç¬¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™æˆ‘ä»¬çš„æ–‡æ¡£æˆ–è€…æ˜¯ç¨‹åºä¼šä¹±ç ã€‚åœ¨20ä¸–çºª80å¹´ä»£å¼€å§‹å¯åŠ¨ç»Ÿä¸€å·¥ä½œæ¥èŠ‚è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒUnicodeä¹Ÿå°±è¯ç”Ÿäº†ã€‚å·¥ä½œå¼€å§‹æ—¶ï¼Œäººä»¬è®¤ä¸ºä¸¤ä¸ªå­—èŠ‚çš„ä»£ç å®½åº¦è¶³ä»¥å¯¹ä¸–ç•Œä¸Šå„ç§è¯­è¨€çš„æ‰€æœ‰å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œå¹¶ä¸”æœ‰è¶³å¤Ÿçš„ç©ºé—´å£ç»™æœªæ¥æ‰©å±•ï¼Œå½“æ—¶æ‰€æœ‰çš„äººéƒ½æ˜¯è¿™ä¹ˆå‘çš„ã€‚åœ¨1991å¹´å‘å¸ƒäº†Unicode 1.0ï¼Œå½“æ—¶ä»…å ç”¨äº†65536ä¸ªä»£ç å€¼ä¸åˆ°ä¸€åŠçš„éƒ¨åˆ†ã€‚

Unicodeç¼–ç å°±å¥½åƒæ˜¯ä¸€ä¸ªæœ¬å­—å…¸ï¼Œè§„å®šäº†æ¯ä¸€ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„ç¼–ç å€¼ï¼Œ**ä½†æ˜¯Unicodeå¹¶æ²¡æœ‰è§„å®šç¼–ç çš„å­˜å‚¨æ–¹å¼**ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å½¢å¼æ¥å‚¨å­˜ä½ çš„äºŒè¿›åˆ¶ç¼–ç åªè¦ä½ è‡ªå·±æ‡‚å¾—ã€‚å½“ç„¶è¿™é‡Œæ‰€è¯´çš„å‚¨å­˜å½¢å¼å¹¶ä¸æ˜¯å‚¨å­˜ä»‹è´¨ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œæ±‰å­—ä¸­çš„â€œæ±‰â€å­—çš„Unicode ç ç‚¹æ˜¯ 0x6c49ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ˜¯ 110110001001001ï¼ŒäºŒè¿›åˆ¶æ•°æœ‰ 15 ä½ï¼Œè¿™ä¹Ÿå°±è¯´æ˜äº†å®ƒè‡³å°‘éœ€è¦ 2 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚å¯ä»¥æƒ³è±¡çš„åˆ°ï¼Œä»¥åéšç€æ›´å¤šå­—ç¬¦çš„åŠ å…¥ï¼Œå°±å¯èƒ½éœ€è¦3ä¸ªå­—èŠ‚æˆ–è€…æ›´å¤šçš„å­—èŠ‚æ¥å­˜å‚¨ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯é‚£äº›ä¹‹å¤šå­—èŠ‚çš„ç¬¦å·å‡ºç°çš„æ¦‚ç‡å¯èƒ½ä¼šå¾ˆå°ï¼Œç”šè‡³è¯´æ ¹æœ¬ç”¨ä¸åˆ°ï¼Œé‚£äº›1å­—èŠ‚æˆ–è€…2å­—èŠ‚çš„ç¬¦å·åˆä¼šå¡«å……æˆåˆ¶å®šçš„é•¿åº¦ï¼Œè¿™å°±æµªè´¹2å€ç”šè‡³æ›´å¤šçš„ç©ºé—´ï¼Œè¿™æ˜¯ä¸èƒ½è¢«äººä»¬æ‰€æ¥å—çš„ã€‚

### UTF-8

ä¸ºäº†è§£å†³Unicodeç¼–ç çš„ç©ºé—´é—®é¢˜ï¼Œå°±è¯ç”Ÿäº†è¿™ä¸ªè¢«å¹¿æ³›ä½¿ç”¨çš„UTF-8æ¯”ç¼–ç ã€‚UTF-8ç¼–ç ä¸ä»…å®ç°äº†ASCIIç¼–ç çš„å…¼å®¹æ€§ï¼Œè€Œä¸”è§£å†³äº†Unicodeçš„ç©ºé—´æµªè´¹é—®é¢˜ã€‚

UTF-8ç¼–ç ä¹‹æ‰€ä»¥èƒ½å¤Ÿè§£å†³ç©ºé—´æµªè´¹çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºä»–é‡‡ç”¨äº†å¯å˜é•¿åº¦çš„ç¼–ç æ–¹å¼ã€‚ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š

> 1. å¯¹äºå•ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œç¬¬ä¸€ä½è®¾ä¸º 0ï¼Œåé¢çš„ 7 ä½å¯¹åº”è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚å› æ­¤ï¼Œå¯¹äºè‹±æ–‡ä¸­çš„ 0 - 127 å·å­—ç¬¦ï¼Œä¸ ASCII ç å®Œå…¨ç›¸åŒã€‚è¿™æ„å‘³ç€ ASCII ç é‚£ä¸ªå¹´ä»£çš„æ–‡æ¡£ç”¨ UTF-8 ç¼–ç æ‰“å¼€å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚
> 2. å¯¹äºéœ€è¦ä½¿ç”¨ N ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºçš„å­—ç¬¦ï¼ˆN > 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ N ä½éƒ½è®¾ä¸º 1ï¼Œç¬¬ N + 1 ä½è®¾ä¸º0ï¼Œå‰©ä½™çš„ N - 1 ä¸ªå­—èŠ‚çš„å‰ä¸¤ä½éƒ½è®¾ä½ 10ï¼Œå‰©ä¸‹çš„äºŒè¿›åˆ¶ä½åˆ™ä½¿ç”¨è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹æ¥å¡«å……ã€‚

| Unicodeåå…­è¿›åˆ¶ç ç‚¹èŒƒå›´       | UTF-8äºŒè¿›åˆ¶ç¼–ç èŒƒå›´                        |
| --------------------- | ----------------------------------- |
| 0000 0000 - 0000 007F | 0xxxxxxx                            |
| 0000 0080 - 0000 07FF | 110xxxxx 10xxxxxx                   |
| 0000 0800 - 0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx          |
| 0001 0000 - 0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx |

æ ¹æ®ä¸Šé¢çš„ç¼–ç è¡¨å¾ˆå®¹æ˜“å°±èƒ½å¤Ÿé€šè¿‡Unicodeç ç‚¹è®¡ç®—å‡ºå¯¹åº”çš„UTF-8ç¼–ç å€¼ã€‚

### UTF-16

UTF-16ä¹Ÿæ˜¯ä¸€ç§å¯å˜é•¿åº¦çš„ç¼–ç ï¼Œä½†æ˜¯ä»–ä¸åƒUTF-8é‚£æ ·æœ‰1å­—èŠ‚ã€2å­—èŠ‚ã€3å­—èŠ‚ã€4å­—èŠ‚ï¼Œä»–åªæœ‰2å­—èŠ‚å’Œ4å­—èŠ‚çš„é•¿åº¦ï¼ŒåŒæ ·æ˜¯é‡‡ç”¨äº†Unicodeçš„ç¼–ç æ ‡å‡†ã€‚

è¦äº†è§£UTF-16çš„ç¼–ç æ–¹å¼é¦–å…ˆè¦äº†è§£å¹³é¢çš„æ¦‚å¿µã€‚Unicodeå°±åƒæ˜¯ä¸€æœ¬å¾ˆåšçš„å­—å…¸ï¼ŒåŒ…å«äº†å¾ˆå¤šå­—ç¬¦ï¼Œè¿™ä¹ˆå¤šçš„å­—ç¬¦å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§å®šä¹‰çš„ï¼Œè€Œæ˜¯åˆ†åŒºå®šä¹‰çš„ï¼Œæ¯ä¸€ä¸ªåŒºæœ‰65536ä¸ªå­—ç¬¦ï¼Œæˆä¸ºä¸€ä¸ªå¹³é¢ï¼Œå¦‚ä»Šä¸€å…±å®šä¹‰äº†17ä¸ªå¹³é¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒUnicodeå­—ç¬¦é›†çš„å¤§å°ä¸º17\*65536ã€‚ç¬¬ä¸€ä¸ªå¹³é¢ç§°ä¹‹ä¸ºåŸºæœ¬å¹³é¢ï¼Œå…¶ä»–çš„å¹³é¢ç§°ä¹‹ä¸ºè¾…åŠ©å¹³é¢ï¼Œä½†æ˜¯åŸºæœ¬å¹³é¢å†…ä» **U+D800** åˆ° **U+DFFF** æ˜¯ä¸€ä¸ªç©ºæ®µï¼Œæ˜¯ä¸åŒ…å«ä»»ä½•å­—ç¬¦çš„ã€‚

UTF-16ç¼–ç å°±æ˜¯å¾ˆå·§å¦™çš„åˆ©ç”¨äº†åŸºæœ¬å¹³é¢ä¸­çš„ç©ºæ®µæ¥å®ç°çš„ï¼ŒUTF-16ç¼–ç çš„è§„åˆ™å¦‚ä¸‹ï¼š

> 1. å¦‚æœå­—ç¬¦åœ¨åŸºæœ¬å¹³é¢å†…ï¼Œå°±ç›´æ¥ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦çš„ç ç‚¹
> 2. å¦‚æœå­—ç¬¦åœ¨è¾…åŠ©å¹³é¢å†…ï¼Œä½¿ç”¨å››å­—èŠ‚ï¼Œå°†å­—ç¬¦çš„é«˜ä½æ˜ å°„åˆ°å‰ä¸¤ä¸ªå­—èŠ‚çš„U+D800åˆ°U+DFFFåŒºé—´ï¼Œå°†åœ°ä½æ˜ å°„åˆ°åä¸¤ä¸ªå­—èŠ‚çš„ U+D800åˆ°U+DFFFåŒºé—´ã€‚

UTF-16åŒæ ·è§£å†³äº†Unicodeå¤§é‡å­—èŠ‚æµªè´¹çš„é—®é¢˜ï¼Œä½†æ˜¯ä»–å¹¶æ²¡æœ‰å‘ä¸‹å…¼å®¹ASCIIï¼Œå› ä¸ºASCIIæ˜¯å•å­—èŠ‚ï¼Œè€ŒUTF-16è‡³å°‘ä¹Ÿéœ€è¦ä¸¤ä¸ªå­—èŠ‚ã€‚

### javaä¸­çš„ç¼–ç 

javaè®¾è®¡ä¹‹åˆï¼Œå³é‡‡ç”¨äº†16ä½çš„Unicodeç¼–ç ï¼Œä½†æ˜¯éšå¤§é‡ä¸­æ–‡ï¼Œæ—¥æ–‡å’Œå…¶ä»–è¯­è¨€ç¬¦å·çš„åŠ å…¥ï¼Œ16ä½çš„Unicodeå¹¶ä¸èƒ½è¡¨ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œä»java 5å¼€å§‹ï¼Œè™½ç„¶charç±»å‹ä¾ç„¶æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯Stringç±»å‹çš„å˜æˆäº†UTF-16ç¼–ç ã€‚è¿™æ ·å°±ä¼šå‡ºåƒä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯charç±»å‹å¹¶ä¸èƒ½è¡¨ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œå› ä¸ºæœ‰äº›å­—ç¬¦ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚å¹¶ä¸èƒ½å­˜å‚¨ï¼Œæ‰€ä»¥ï¼Œ**é™¤éä½ ç¡®å®šä½ è¦å¤„ç†ä»£ç å•å…ƒï¼Œå¦åˆ™ä¸å»ºè®®ä½¿ç”¨charç±»å‹**ï¼Œä»–å¤ªåº•å±‚äº†ã€‚

### javaä¸­çš„charç±»å‹

javaä¸­çš„charç±»å‹å¹¶ä¸æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œæ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼Œä»–è¡¨ç¤ºUTF-16ç¼–ç ä¸­çš„ä¸€ä¸ª**ä»£ç å•å…ƒ**ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç ç‚¹ã€‚å¯ä»¥ä½¿ç”¨`boolean java.lang.Character.isSupplementaryCodePoint(int codePoint)`æ¥åˆ¤æ–­ä¸€ä¸ªcharç±»å‹æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦è¿˜æ˜¯ä¸€ä¸ªç ç‚¹çš„ä¸€éƒ¨åˆ†ã€‚

### javaä¸­çš„Stringç±»å‹

javaä¸­çš„Stringç¼–ç ç±»å‹ä½¿ç”¨äº†UTF-16ç¼–ç ç±»å‹ï¼Œè¿™æ„å‘³ç€åœ¨javaçš„å­—ç¬¦ä¸²ä¸­å¯ä»¥ä½¿ç”¨ä»»ä½•ç¬¦å·ï¼Œemojiè¡¨æƒ…ç¬¦å·ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚

æ­£æ˜¯å› ä¸ºjavaä¸­ä½¿ç”¨äº†UTF-16ï¼Œæ‰€ä»¥å¯¼è‡´å¾ˆå¤šå°ç™½å¯¹Stringç±»ä¸­çš„ä¸€äº›æ–¹æ³•æœ‰ä¸€äº›ç†è§£ä¸Šçš„é”™è¯¯ã€‚

`char charAt(int index)`ï¼šè¿”å›æŒ‡å®šä½ç½®çš„ä»£ç å•å…ƒã€‚å¹¶ä¸æ˜¯æŒ‡å®šä½ç½®çš„å­—ç¬¦ã€‚

`int length()`ï¼šè¿”å›å­—ç¬¦ä¸²çš„ä»£ç å•å…ƒçš„ä¸ªæ•°ã€‚å¹¶ä¸æ˜¯å­—ç¬¦ä¸ªæ•°ã€‚

`String substring(int beginIndex,int endIndex)`ï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²åŒ…å«åŸå§‹å­—ç¬¦ä¸²ä¸­ä»beginIndexåˆ°å­—ç¬¦ä¸²æœ«å°¾æˆ–endIndex-1çš„æ‰€æœ‰**ä»£ç å•å…ƒ**ã€‚å¹¶ä¸æ˜¯ä»beginIndexåˆ°endIndex-1çš„æ‰€æœ‰å­—ç¬¦ã€‚

```java
package cn.happyonion801.demo;

import org.junit.Test;

/**
 * time : 2021/1/11
 * author : HappyOnion801
 */
public class DemoString {
    @Test
    public void String() {
        //happyOnion801ğŸ˜˜ğŸ˜˜ğŸ˜˜ï¼ŒIDEAå±…ç„¶æŠŠè¡¨æƒ…ç¬¦å·è½¬è¯‘äº†
        String str = "happyOnion801\uD83D\uDE18\uD83D\uDE18\uD83D\uDE18";
        System.out.println(str.charAt(14));//è¾“å‡ºçš„â€œ?â€ä¹±ç ï¼Œå¹¶ä¸æ˜¯ğŸ˜˜
        System.out.println(str.length());//è¾“å‡ºçš„æ˜¯19ï¼Œå¹¶ä¸æ˜¯16
        System.out.println(str.substring(13, 15));//è¾“å‡ºğŸ˜˜ï¼Œå¹¶ä¸æ˜¯ğŸ˜˜ğŸ˜˜
    }

    /**
     * å°†å­—ç¬¦ä¸²æ‹†åˆ†æˆå•ä¸ªå­—ç¬¦ã€‚
     * codePointAt(int index): Returns the code point at the given index of the char array. If the char value at the given index in the char array is in the high-surrogate range, the following index is less than the length of the char array, and the char value at the following index is in the low-surrogate range, then the supplementary code point corresponding to this surrogate pair is returned. Otherwise, the char value at the given index is returned.
     * è¿™æ˜¯jdk11ä¸­å®˜æ–¹APIæ–‡æ¡£ç»™çš„è§£é‡Šã€‚
     */
    @Test
    public void print() {
        String str = "happyOnion801\uD83D\uDE18\uD83D\uDE18\uD83D\uDE18";
        for (int i = 0; i < str.length(); i++) {
            if (Character.isSupplementaryCodePoint(str.codePointAt(i))) {
                System.out.println(str.substring(i, i + 2));
                i++;
            } else {
                System.out.println(str.charAt(i));
            }
        }
    }
}

```

***

> å‚è€ƒæ–‡çŒ®
>
> [å½»åº•å¼„æ‡‚ Unicode ç¼–ç ](https://www.jianshu.com/p/6bdc0d52620a)
>
> ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ å·Iã€‹ç¬¬11ç‰ˆ
